---
layout: default
title: "更新履歴"
javascript: "https://cdn.jsdelivr.net/npm/marked/marked.min.js"
---
            <section id="changelog">
                <h2>更新履歴</h2>
                <div id="changelog-loading" class="changelog-status">
                    <div class="loading-spinner"></div>
                    <p>更新履歴を読み込み中...</p>
                </div>
                <div id="changelog-content" style="display: none;">
                </div>
                <div id="changelog-error" class="changelog-status" style="display: none;">
                    <p>更新履歴の読み込みに失敗しました。<a href="https://github.com/yuki-2525/UniAsset-UnityEditorAssetBrowser-/blob/main/CHANGELOG.md" target="_blank">GitHub で直接確認</a>してください。</p>
                </div>
            </section>

<script>
async function loadChangelog() {
    const loadingDiv = document.getElementById('changelog-loading');
    const contentDiv = document.getElementById('changelog-content');
    const errorDiv = document.getElementById('changelog-error');
    
    try {
        const response = await fetch('https://raw.githubusercontent.com/yuki-2525/UniAsset-UnityEditorAssetBrowser-/main/CHANGELOG.md');
        if (!response.ok) {
            throw new Error('ファイルの読み込みに失敗しました');
        }
        
        const markdown = await response.text();
        const html = marked.parse(markdown);
        
        // 読み込み完了後の表示切り替え
        loadingDiv.style.display = 'none';
        contentDiv.innerHTML = html;
        contentDiv.style.display = 'block';
        
        // バージョン番号にアンカーを追加
        addVersionAnchors();
        
    } catch (error) {
        console.error('Error loading changelog:', error);
        loadingDiv.style.display = 'none';
        errorDiv.style.display = 'block';
    }
}

function addVersionAnchors() {
    const versionHeaders = document.querySelectorAll('#changelog-content h2');
    versionHeaders.forEach(header => {
        const version = header.textContent.match(/^\d+\.\d+\.\d+/);
        if (version) {
            header.id = `v${version[0]}`;
            // クリック可能なアンカーリンクを追加
            const anchor = document.createElement('a');
            anchor.href = `#v${version[0]}`;
            anchor.className = 'version-anchor';
            anchor.innerHTML = header.innerHTML;
            header.innerHTML = '';
            header.appendChild(anchor);
        }
    });
}

document.addEventListener('DOMContentLoaded', loadChangelog);
</script>